So now let's talk about the newest kind of load balancer

called the gateway load balancer.

So it is used to deploy

scale and manage your fleet of

third-party network, neutral appliances in AWS.

And it will explain what that means in a second.

So you would use a gateway load balancer

if you want it to have all traffic,

of your network

to go through a firewall that you have,

or an intrusion detection and prevention system.

So IDPs or a deep packet inspection system,

or you want to, to modify some payloads,

but at the network level. Okay.

So let's have a look

to make it very simple with a diagram.

So, say have users and these users

are used to access your applications.

Now we know that their users, for example,

can access our applications directly

using a load balancer,

for example, and an application, or balancer.

And then the traffic goes directly

from the users to the ALB, to the application.

But what if you wanted

all that network traffic

to be inspected first,

before being sent to your application,

you have actually deployed

a bunch of third party virtual appliances,

for example, EC2 instances

that you want all traffic to go through

before the traffic reaches your application.

So to do so, it used to be very complicated,

but now with a gateway load balancer,

it is actually very simple.

So you're going to create a gateway load balancer

and what's going to happen is that

behind the scenes.

The route tables have to be updated in your VPC.

Now this is quite advanced

and it's more in the networking side,

but bear with me.

So the route tables are modified.

And now what happens at all users traffic

first goes through a gateway load balancer

and the gateway load balancer

will then spread that traffic across

a target group of your virtual appliances.

And so all the traffic will reach these appliances

then the appliances will analyze the traffic,

you know, what do whatever they have to do.

So for example, firewall again,

intruder detection and so on.

And then if they're happy with it,

they can send it back to the gateway load balancer.

If they're not happy with it,

they can just drop the traffic. For example,

for a firewall, you would drop the traffic,

but if it's accepted,

then it goes through your gateway load balancer again,

and then the gateway load balancer

Will forward a traffic

all the way to your application

and for your application. This is transparent.

The only thing that has happened now

is that all the traffic

has gone through the gateway load balancer.

And your third-party patrol appliances,

for you to analyze all that network traffic

and possibly drop it.

So this is the power of the gateway load balancer

is to analyze network traffic and so on.

So how does that work?

Well, the gateway load balancer

operates at a lower level than all

the load balancers we've seen.

This is layer three,

which is a network layer for IP packets.

So what's going to happen

is that you're gateway load balancer

has two functions.

The first one is a transparent network gateway

because all the traffic

will in your VPC will go through a single entry

and a single exit,

which is going to be your gateway load balancer,

and then is going to be a load balancer

because it distributes that traffic

across a sets of virtual appliances

and your target group.

So this is basically

what you remember about the gateway load balancer.

And finally, if you see on an exam,

that's you want to use the GENEVE protocol

on ports 6081

Then again, this will be right away

if you getaway load balancer.

So hopefully this diagram makes sense. Now,

what can be target groups, for the gateway load balancers

So this is your third party appliances.

They can either be EC2 instances

and you register them by instance ID,

or they can be IP addresses.

In that case, they must be private IPs.

And for example, if you are running

these virtual appliances on your own network,

on your own data center,

then you can register them by IP manually.

So that's it for the gateway load balancer.

It is extremely difficult to do a hands-on on it.

So I will skip one. Okay.

But just so you know, again,

the most important thing to remember

is that one diagram on the right-hand side,

if you understand this diagram,

you understand, getaway load balancers.

And I don't think

any deep dive question will be asked on it

just at a high level,

what it means and how it works. Okay.

So that's it.

I hope you liked it,

and I will see you in the next lecture.


So now let's have a look at the differences

between CNAME and Aliases.

So when you have an AWS Resource,

for example, a Load Balancer or CloudFront,

it will expose a hostname.

And what you want is to maybe map that hostname

to a domain you own.

For example, you want to map this Load Balancer

into myapp.mydomain.com.

So we have two options.

The first one is to use a CNAME record.

So we've seen A records,

but now let's look at CNAME records.

So CNAME allows you to point a hostname

to any other hostname.

For example, you can say app.mydomain.com

is pointing to blabla.anything.com.

And this only works if you have a non root domain name,

so if you have something.mydomain.com.

It does not work for just mydomain.com,

as we'll see in the hands-on.

On the other hand, you have alias records,

and these are specific to Route 53,

but they allow you to point a hostname

to a specific AWS Resource.

So app.mydomain.com is pointing to blabla.amazonaws.com.

And these resources we'll see in a second where they are.

But these alias records work

for both root domains and non root domains.

So you can have mydomain.com pointing

to, as an alias, to an alias resource

which is very, very good.

So this is something that the exam may test you on,

and we'll see this in the hands-on.

So on top of it, alias is very good

because they're free of charge,

and they have a native health check capability within them.

Okay, so if we look at these alias records in details,

they are only mapped to resources in AWS.

So you would say, "Okay, here is Route 53.

I want to have example.com as an alias record of type A,

and the value is the DNS name of the load balancer you have.

Now, this is an extension to DNS functionalities.

That's something that's across all DNS

that exist out there.

And in case the underlying ALB have IP changes,

then automatically the alias record will recognize them.

So it said unlike CNAME, alias records can be used for top,

for the top node of the DNS namespace called the Zone Apex,

so you can use a alias record for example.com.

Now, the alias record is always of type A or AAAA

which is for resources, so either IPv4 or IPv6.

When you have an alias record, you cannot set the TTL.

It is set automatically by Route 53.

So what are the targets for alias records?

Well, it could be Elastic Load Balancers.

It could be CloudFront Distributions.

And some of these you'll see,

you'll have seen in this course,

some of these you will not have seen in this course,

but this is fine.

It's just for you to get an idea of what they can be.

So ELBs, CloudFront Distributions, API Gateway,

Elastic Beanstalk environments, S3 Websites,

so not S3 Buckets but S3 Websites

when these buckets are enabled as websites,

VPC Interface Endpoints, Global Accelerator accelerator,

and Route 53 records in the same hosted zone.

One thing that is not there

is that you cannot set an alias for an EC2 DNS name.

This is something you need to remember.

So EC2 DNS names are not something you can have a target,

that can be the target of an alias record, okay?

Just, and also to let you to know.

So now let's have a look in the console

to see how CNAMEs and alias records work.

So let's go ahead and create a record,

and this one will be of type CNAME.

So I will call this one myapp.stephanetheteacher.com.

And the record type now is not A, it's not AAAA. It's CNAME.

And then the value must be a domain name.

And very easy, I already have a domain name available.

That's my ALB.

So what I'm going to do

is I'm going to copy those name of my ALB

and paste it in here.

The idea is that now

instead of accessing my ALB through this URL,

I want to be access the ALB

through myapp.stephanetheteacher.com.

Okay, so I will just create this record,

and now myapp.stephanetheteacher.com has been created.

And so if I go into my Chrome web browser

on the right-hand side and open this URL,

now you see that the answer is Hello World

from my IP blah, blah, blah in AZ eu-central-1c.

So this domain name is in fact covered by the ALB,

and the ALB is directing the traffic into one EC2 instance,

and so therefore I receive back this Hello World.

So this is good, but this is not AWS native, okay?

This is something that will work for many domain names,

but we can do something better.

Because we are redirecting into an ALB,

what we can do is create an alias record.

So I can create a record,

and this time it's going to be

myalias.stephanetheteacher.com,

and the record type is A

because my ALB is currently having only IPv4 traffic.

And the value of it,

so we have to say, we have to take the alias right here,

and we're going to route traffic to,

and then we have a list of options, okay?

So we can see a lot of different options,

but right now it's going to be

an Alias to an Application and Classic Load Balancer.

We need to choose a region, so it is in eu-central-1 for me.

And then we need to choose the load balancer,

so I will choose this load balancer right here.

Then automatically we can evaluate

the target health as well with a Yes

because this is an alias record.

So we'll click on Create this record,

and now I have a new record right here

called myalias.stephanetheteacher.com.

And the cool thing is that this record

is free to query, okay?

So I'm not going to pay any money

because this is an alias record.

So if I click on myalias.stephanetheteacher.com,

it's going to perform a few DNS queries,

and now, again, I get the same response.

Okay, nothing has changed, but it is working.

Okay, so that's perfect.

But now what if you consider the domain apex,

so if you want to have just stephanetheteacher.com

to redirect to this page?

So what we're going to do is create a record,

and let's go ahead.

So we're going to just have nothing in here, okay?

And we're going to have a CNAME record

pointing to the domain name of my ALB

which is copied from here and pasted in here.

Okay, so we want to say, "Hey, stephanetheteacher.com

is going to be a CNAME for this value."

Now, this is not going to work. Let's try it.

It's saying, "Hey, bad request.

The CNAME is not permitted at apex of this zone."

So this zone is stephanetheteacher.com,

and the apex of the zone is stephanetheteacher.com,

and therefore we cannot set up a CNAME at the apex.

So the only way we can deal with this issue

is instead to create an alias

and the record is going to be of type A,

and the alias is going to point again to an ALB or CLB

in the eu-central-1 region,

and the load balancer is going to be the one from before.

Now, this is going to be accepted

because this is an alias record,

and this is what the exam may test you on, okay?

And so now we can see

that stephanetheteacher.com is accessible.

And so if I go back into my web browser in here,

open a new tab and enter stephanetheteacher.com

and press Enter,

here I get back the Hello World from my load balancer,

so everything is working great, so that's it.

We've shown how CNAMEs and alias records work in AWS.

I hope you liked it, and I will see you in the next lecture.